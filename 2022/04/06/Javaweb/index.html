

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Yuki">
  <meta name="keywords" content="">
  
    <meta name="description" content="！">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaweb">
<meta property="og:url" content="http://example.com/2022/04/06/Javaweb/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165550.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165617.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170451.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170620.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406171436.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172121.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172248.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172609.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406174814.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211543.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211615.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406175001.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406215032.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182511.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182708.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183542.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183553.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183617.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406202338.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205148.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205752.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205820.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210029.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210037.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210049.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210316.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212420.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212908.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212929.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406230015.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419150228.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419161700.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419171758.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172739.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172925.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419173729.png">
<meta property="article:published_time" content="2022-04-06T08:48:25.000Z">
<meta property="article:modified_time" content="2022-08-29T13:20:33.907Z">
<meta property="article:author" content="Yuki">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="javawev">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png">
  
  
  
  <title>Javaweb - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Javaweb"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-04-06 16:48" pubdate>
          2022年4月6日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          18k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          149 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Javaweb</h1>
            
            
              <div class="markdown-body">
                
                <p>！</p>
<span id="more"></span>
<h2 id="CS和BS的异同点"><a href="#CS和BS的异同点" class="headerlink" title="CS和BS的异同点"></a>CS和BS的异同点</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png" srcset="/img/loading.gif" lazyload alt="20220406165128"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165550.png" srcset="/img/loading.gif" lazyload alt="20220406165550"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165617.png" srcset="/img/loading.gif" lazyload alt="20220406165617"></p>
<p>新建Javaweb<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170451.png" srcset="/img/loading.gif" lazyload alt="20220406170451"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170620.png" srcset="/img/loading.gif" lazyload alt="20220406170620"><br>Project template记得选web application</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406171436.png" srcset="/img/loading.gif" lazyload alt="20220406171436"><br>上面有个小点</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172121.png" srcset="/img/loading.gif" lazyload alt="20220406172121"></p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172248.png" srcset="/img/loading.gif" lazyload alt="20220406172248"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172609.png" srcset="/img/loading.gif" lazyload alt="20220406172609"></p>
<h2 id="忘记勾选web-application"><a href="#忘记勾选web-application" class="headerlink" title="忘记勾选web application"></a>忘记勾选web application</h2><p>选中之后点击左上角<code>file</code> 、<code>Project Structure..</code><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406174814.png" srcset="/img/loading.gif" lazyload alt="20220406174814"></p>
<h2 id="导入别人的项目也没有蓝色小点"><a href="#导入别人的项目也没有蓝色小点" class="headerlink" title="导入别人的项目也没有蓝色小点"></a>导入别人的项目也没有蓝色小点</h2><p>web项目需要部署到tomcat里去（部署包），这个部署包称为Artifact<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211543.png" srcset="/img/loading.gif" lazyload alt="20220406211543"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211615.png" srcset="/img/loading.gif" lazyload alt="20220406211615"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406175001.png" srcset="/img/loading.gif" lazyload alt="20220406175001"></p>
<h2 id="JDBC内容"><a href="#JDBC内容" class="headerlink" title="JDBC内容"></a>JDBC内容</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406215032.png" srcset="/img/loading.gif" lazyload alt="20220406215032"></p>
<h3 id="BaseDAO"><a href="#BaseDAO" class="headerlink" title="BaseDAO"></a><code>BaseDAO</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuki.demo07javawebbegin.fruit.dao.base;<span class="hljs-comment">//路径</span><br><br><span class="hljs-keyword">import</span> java.lang.reflect.Field;<br><span class="hljs-keyword">import</span> java.lang.reflect.ParameterizedType;<br><span class="hljs-keyword">import</span> java.lang.reflect.Type;<br><span class="hljs-keyword">import</span> java.sql.*;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseDAO</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DRIVER</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.mysql.jdbc.Driver&quot;</span> ;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/fruitdb?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<span class="hljs-comment">//数据库用户名</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PWD</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;109372&quot;</span> ;<span class="hljs-comment">//数据库密码</span><br><br>    <span class="hljs-keyword">protected</span> Connection conn ;<br>    <span class="hljs-keyword">protected</span> PreparedStatement psmt ;<br>    <span class="hljs-keyword">protected</span> ResultSet rs ;<br><br>    <span class="hljs-comment">//T的Class对象</span><br>    <span class="hljs-keyword">private</span> Class entityClass ;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseDAO</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//getClass() 获取Class对象，当前我们执行的是new FruitDAOImpl() , 创建的是FruitDAOImpl的实例</span><br>        <span class="hljs-comment">//那么子类构造方法内部首先会调用父类（BaseDAO）的无参构造方法</span><br>        <span class="hljs-comment">//因此此处的getClass()会被执行，但是getClass获取的是FruitDAOImpl的Class</span><br>        <span class="hljs-comment">//所以getGenericSuperclass()获取到的是BaseDAO的Class</span><br>        <span class="hljs-type">Type</span> <span class="hljs-variable">genericType</span> <span class="hljs-operator">=</span> getClass().getGenericSuperclass();<br>        <span class="hljs-comment">//ParameterizedType 参数化类型</span><br>        Type[] actualTypeArguments = ((ParameterizedType) genericType).getActualTypeArguments();<br>        <span class="hljs-comment">//获取到的&lt;T&gt;中的T的真实的类型</span><br>        <span class="hljs-type">Type</span> <span class="hljs-variable">actualType</span> <span class="hljs-operator">=</span> actualTypeArguments[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">try</span> &#123;<br>            entityClass = Class.forName(actualType.getTypeName());<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> Connection <span class="hljs-title function_">getConn</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//1.加载驱动</span><br>            Class.forName(DRIVER);<br>            <span class="hljs-comment">//2.通过驱动管理器获取连接对象</span><br>            <span class="hljs-keyword">return</span> DriverManager.getConnection(URL, USER, PWD);<br>        &#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> ;<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(ResultSet rs , PreparedStatement psmt , Connection conn)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">if</span> (rs != <span class="hljs-literal">null</span>) &#123;<br>                rs.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(psmt!=<span class="hljs-literal">null</span>)&#123;<br>                psmt.close();<br>            &#125;<br>            <span class="hljs-keyword">if</span>(conn!=<span class="hljs-literal">null</span> &amp;&amp; !conn.isClosed())&#123;<br>                conn.close();<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//给预处理命令对象设置参数</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParams</span><span class="hljs-params">(PreparedStatement psmt , Object... params)</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-keyword">if</span>(params!=<span class="hljs-literal">null</span> &amp;&amp; params.length&gt;<span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;<br>                psmt.setObject(i+<span class="hljs-number">1</span>,params[i]);<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//执行更新，返回影响行数</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">executeUpdate</span><span class="hljs-params">(String sql , Object... params)</span>&#123;<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">insertFlag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span> ;<br>        insertFlag = sql.trim().toUpperCase().startsWith(<span class="hljs-string">&quot;INSERT&quot;</span>);<br>        <span class="hljs-keyword">try</span> &#123;<br>            conn = getConn();<br>            <span class="hljs-keyword">if</span>(insertFlag)&#123;<br>                psmt = conn.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                psmt = conn.prepareStatement(sql);<br>            &#125;<br>            setParams(psmt,params);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> psmt.executeUpdate() ;<br><br>            rs = psmt.getGeneratedKeys();<br>            <span class="hljs-keyword">if</span>(rs.next())&#123;<br>                <span class="hljs-keyword">return</span> ((Long)rs.getLong(<span class="hljs-number">1</span>)).intValue();<br>            &#125;<br>            <span class="hljs-keyword">return</span> count ;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<span class="hljs-keyword">finally</span> &#123;<br>            close(rs,psmt,conn);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//通过反射技术给obj对象的property属性赋propertyValue值</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValue</span><span class="hljs-params">(Object obj ,  String property , Object propertyValue)</span>&#123;<br>        <span class="hljs-type">Class</span> <span class="hljs-variable">clazz</span> <span class="hljs-operator">=</span> obj.getClass();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//获取property这个字符串对应的属性名 ， 比如 &quot;fid&quot;  去找 obj对象中的 fid 属性</span><br>            <span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> clazz.getDeclaredField(property);<br>            <span class="hljs-keyword">if</span>(field!=<span class="hljs-literal">null</span>)&#123;<br>                field.setAccessible(<span class="hljs-literal">true</span>);<br>                field.set(obj,propertyValue);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (NoSuchFieldException | IllegalAccessException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//执行复杂查询，返回例如统计结果</span><br>    <span class="hljs-keyword">protected</span> Object[] executeComplexQuery(String sql , Object... params)&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            conn = getConn() ;<br>            psmt = conn.prepareStatement(sql);<br>            setParams(psmt,params);<br>            rs = psmt.executeQuery();<br><br>            <span class="hljs-comment">//通过rs可以获取结果集的元数据</span><br>            <span class="hljs-comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span><br><br>            <span class="hljs-type">ResultSetMetaData</span> <span class="hljs-variable">rsmd</span> <span class="hljs-operator">=</span> rs.getMetaData();<br>            <span class="hljs-comment">//获取结果集的列数</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">columnCount</span> <span class="hljs-operator">=</span> rsmd.getColumnCount();<br>            Object[] columnValueArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[columnCount];<br>            <span class="hljs-comment">//6.解析rs</span><br>            <span class="hljs-keyword">if</span>(rs.next())&#123;<br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i&lt;columnCount;i++)&#123;<br>                    <span class="hljs-type">Object</span> <span class="hljs-variable">columnValue</span> <span class="hljs-operator">=</span> rs.getObject(i+<span class="hljs-number">1</span>);     <span class="hljs-comment">//33    苹果      5</span><br>                    columnValueArr[i]=columnValue;<br>                &#125;<br>                <span class="hljs-keyword">return</span> columnValueArr ;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            close(rs,psmt,conn);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> ;<br>    &#125;<br><br>    <span class="hljs-comment">//执行查询，返回单个实体对象</span><br>    <span class="hljs-keyword">protected</span> T <span class="hljs-title function_">load</span><span class="hljs-params">(String sql , Object... params)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            conn = getConn() ;<br>            psmt = conn.prepareStatement(sql);<br>            setParams(psmt,params);<br>            rs = psmt.executeQuery();<br><br>            <span class="hljs-comment">//通过rs可以获取结果集的元数据</span><br>            <span class="hljs-comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span><br><br>            <span class="hljs-type">ResultSetMetaData</span> <span class="hljs-variable">rsmd</span> <span class="hljs-operator">=</span> rs.getMetaData();<br>            <span class="hljs-comment">//获取结果集的列数</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">columnCount</span> <span class="hljs-operator">=</span> rsmd.getColumnCount();<br>            <span class="hljs-comment">//6.解析rs</span><br>            <span class="hljs-keyword">if</span>(rs.next())&#123;<br>                <span class="hljs-type">T</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> (T)entityClass.newInstance();<br><br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i&lt;columnCount;i++)&#123;<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> rsmd.getColumnName(i+<span class="hljs-number">1</span>);            <span class="hljs-comment">//fid   fname   price</span><br>                    <span class="hljs-type">Object</span> <span class="hljs-variable">columnValue</span> <span class="hljs-operator">=</span> rs.getObject(i+<span class="hljs-number">1</span>);     <span class="hljs-comment">//33    苹果      5</span><br>                    setValue(entity,columnName,columnValue);<br>                &#125;<br>                <span class="hljs-keyword">return</span> entity ;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IllegalAccessException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (InstantiationException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            close(rs,psmt,conn);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> ;<br>    &#125;<br><br><br>    <span class="hljs-comment">//执行查询，返回List</span><br>    <span class="hljs-keyword">protected</span> List&lt;T&gt; <span class="hljs-title function_">executeQuery</span><span class="hljs-params">(String sql , Object... params)</span>&#123;<br>        List&lt;T&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">try</span> &#123;<br>            conn = getConn() ;<br>            psmt = conn.prepareStatement(sql);<br>            setParams(psmt,params);<br>            rs = psmt.executeQuery();<br><br>            <span class="hljs-comment">//通过rs可以获取结果集的元数据</span><br>            <span class="hljs-comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span><br><br>            <span class="hljs-type">ResultSetMetaData</span> <span class="hljs-variable">rsmd</span> <span class="hljs-operator">=</span> rs.getMetaData();<br>            <span class="hljs-comment">//获取结果集的列数</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">columnCount</span> <span class="hljs-operator">=</span> rsmd.getColumnCount();<br>            <span class="hljs-comment">//6.解析rs</span><br>            <span class="hljs-keyword">while</span>(rs.next())&#123;<br>                <span class="hljs-type">T</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> (T)entityClass.newInstance();<br><br>                <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ; i&lt;columnCount;i++)&#123;<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> rsmd.getColumnName(i+<span class="hljs-number">1</span>);            <span class="hljs-comment">//fid   fname   price</span><br>                    <span class="hljs-type">Object</span> <span class="hljs-variable">columnValue</span> <span class="hljs-operator">=</span> rs.getObject(i+<span class="hljs-number">1</span>);     <span class="hljs-comment">//33    苹果      5</span><br>                    setValue(entity,columnName,columnValue);<br>                &#125;<br>                list.add(entity);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IllegalAccessException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (InstantiationException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            close(rs,psmt,conn);<br>        &#125;<br>        <span class="hljs-keyword">return</span> list ;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="FruitDAO"><a href="#FruitDAO" class="headerlink" title="FruitDAO"></a>FruitDAO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuki.demo07javawebbegin.fruit.dao;<span class="hljs-comment">//路径</span><br><br><span class="hljs-keyword">import</span> com.yuki.demo07javawebbegin.fruit.pojo.Fruit;<span class="hljs-comment">//路径</span><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FruitDAO</span> &#123;<br>    <span class="hljs-comment">//查询库存列表</span><br>    List&lt;Fruit&gt; <span class="hljs-title function_">getFruitList</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">//新增库存</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">addFruit</span><span class="hljs-params">(Fruit fruit)</span>;<br><br>    <span class="hljs-comment">//修改库存</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">updateFruit</span><span class="hljs-params">(Fruit fruit)</span>;<br><br>    <span class="hljs-comment">//根据名称查询特定库存</span><br>    Fruit <span class="hljs-title function_">getFruitByFname</span><span class="hljs-params">(String fname)</span>;<br><br>    <span class="hljs-comment">//删除特定库存记录</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">delFruit</span><span class="hljs-params">(String fname)</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="Fruit"><a href="#Fruit" class="headerlink" title="Fruit"></a>Fruit</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuki.demo07javawebbegin.fruit.pojo;<span class="hljs-comment">//路径</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fruit</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer fid ;<br>    <span class="hljs-keyword">private</span> String fname ;<br>    <span class="hljs-keyword">private</span> Integer price ;<br>    <span class="hljs-keyword">private</span> Integer fcount ;<br>    <span class="hljs-keyword">private</span> String remark ;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Fruit</span><span class="hljs-params">()</span>&#123;&#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Fruit</span><span class="hljs-params">(Integer fid, String fname, Integer price, Integer fcount, String remark)</span> &#123;<br>        <span class="hljs-built_in">this</span>.fid = fid;<br>        <span class="hljs-built_in">this</span>.fname = fname;<br>        <span class="hljs-built_in">this</span>.price = price;<br>        <span class="hljs-built_in">this</span>.fcount = fcount;<br>        <span class="hljs-built_in">this</span>.remark = remark;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getFid</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> fid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFid</span><span class="hljs-params">(Integer fid)</span> &#123;<br>        <span class="hljs-built_in">this</span>.fid = fid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getFname</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> fname;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFname</span><span class="hljs-params">(String fname)</span> &#123;<br>        <span class="hljs-built_in">this</span>.fname = fname;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Integer price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getFcount</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> fcount;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFcount</span><span class="hljs-params">(Integer fcount)</span> &#123;<br>        <span class="hljs-built_in">this</span>.fcount = fcount;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRemark</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> remark;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRemark</span><span class="hljs-params">(String remark)</span> &#123;<br>        <span class="hljs-built_in">this</span>.remark = remark;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> fid + <span class="hljs-string">&quot;\t\t&quot;</span> + fname + <span class="hljs-string">&quot;\t\t&quot;</span> + price +<span class="hljs-string">&quot;\t\t&quot;</span> + fcount +<span class="hljs-string">&quot;\t\t&quot;</span> + remark ;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="AddServlet"><a href="#AddServlet" class="headerlink" title="AddServlet"></a>AddServlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yuki.demo07javawebbegin.servlets;<span class="hljs-comment">//路径</span><br><br><span class="hljs-keyword">import</span> com.yuki.demo07javawebbegin.fruit.dao.FruitDAO;/路径<br><span class="hljs-keyword">import</span> com.yuki.demo07javawebbegin.fruit.dao.impl.FruitDAOImpl;<span class="hljs-comment">//路径</span><br><span class="hljs-keyword">import</span> com.yuki.demo07javawebbegin.fruit.pojo.Fruit;<span class="hljs-comment">//路径</span><br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AddServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> <span class="hljs-comment">//获取表单中数据</span><br>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br>        req.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<span class="hljs-comment">//解决中文乱码</span><br>        <span class="hljs-comment">//idea中写dopost自动生成dopost方法</span><br>        <span class="hljs-comment">//super.doPost(req, resp);</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fname</span> <span class="hljs-operator">=</span>  req.getParameter(<span class="hljs-string">&quot;fname&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">priceStr</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;price&quot;</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> Integer.parseInt(priceStr); <span class="hljs-comment">//发来只能是字符串，强转成数字</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fcountStr</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;fcount&quot;</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">fcount</span> <span class="hljs-operator">=</span> Integer.parseInt(fcountStr);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">remark</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;remark&quot;</span>);<br>        <span class="hljs-comment">//快捷键soutv</span><br><span class="hljs-comment">/*      System.out.println(&quot;remark = &quot; + remark);</span><br><span class="hljs-comment">        System.out.println(&quot;fcount = &quot; + fcount);</span><br><span class="hljs-comment">        System.out.println(&quot;price = &quot; + price);</span><br><span class="hljs-comment">        System.out.println(&quot;fname = &quot; + fname);*/</span><br>        <span class="hljs-type">FruitDAO</span> <span class="hljs-variable">fruitDAO</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FruitDAOImpl</span>();<br>       <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> fruitDAO.addFruit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Fruit</span>(<span class="hljs-number">0</span>,fname,price,fcount,remark));<span class="hljs-comment">//判断是否添加成功</span><br>        System.out.println(flag ?<span class="hljs-string">&quot;添加成功！&quot;</span> : <span class="hljs-string">&quot;添加失败！&quot;</span>);<span class="hljs-comment">//控制台打印结果</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>




<h2 id="接收表单数据"><a href="#接收表单数据" class="headerlink" title="接收表单数据"></a>接收表单数据</h2><p>创建AddServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AddServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> <span class="hljs-comment">//获取表单中数据</span><br>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//idea中写dopost自动生成dopost方法</span><br>        <span class="hljs-comment">//super.doPost(req, resp);</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fname</span> <span class="hljs-operator">=</span>  req.getParameter(<span class="hljs-string">&quot;fname&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">priceStr</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;price&quot;</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> Integer.parseInt(priceStr); <span class="hljs-comment">//发来只能是字符串，强转成数字</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fcountStr</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;fcount&quot;</span>);<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">fcount</span> <span class="hljs-operator">=</span> Integer.parseInt(fcountStr);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">remark</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;remark&quot;</span>);<br>        <span class="hljs-comment">//快捷键soutv</span><br>        System.out.println(<span class="hljs-string">&quot;remark = &quot;</span> + remark);<br>        System.out.println(<span class="hljs-string">&quot;fcount = &quot;</span> + fcount);<br>        System.out.println(<span class="hljs-string">&quot;price = &quot;</span> + price);<br>        System.out.println(<span class="hljs-string">&quot;fname = &quot;</span> + fname);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>然后编写web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AddServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span><br>        com.yuki.demo07javawebbegin.servlets.AddServlet<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>AddServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/add<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182511.png" srcset="/img/loading.gif" lazyload alt="20220406182511"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182708.png" srcset="/img/loading.gif" lazyload alt="20220406182708"></p>
<ol>
<li>用户发请求，action&#x3D;add</li>
<li>项目中，web.xml中找到url-pattern &#x3D; &#x2F;add   -&gt; 第14行</li>
<li>找第13行的servlet-name &#x3D; AddServlet</li>
<li>找和servlet-mapping中servlet-name一致的servlet ， 找到第7行</li>
<li>找第8行的servlet-class -&gt;  com.yuki.demo07javawebbegin.servlets.AddServlet</li>
<li>用户发送的是post请求（method&#x3D;post） ， 因此 tomcat会执行AddServlet中的doPost方法</li>
</ol>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183542.png" srcset="/img/loading.gif" lazyload alt="20220406183542"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183553.png" srcset="/img/loading.gif" lazyload alt="20220406183553"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183617.png" srcset="/img/loading.gif" lazyload alt="20220406183617"></p>
<h2 id="idea中空文件夹自动合并"><a href="#idea中空文件夹自动合并" class="headerlink" title="idea中空文件夹自动合并"></a>idea中空文件夹自动合并</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406202338.png" srcset="/img/loading.gif" lazyload alt="20220406202338"></p>
<h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205148.png" srcset="/img/loading.gif" lazyload alt="20220406205148"><br>解决方法<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205752.png" srcset="/img/loading.gif" lazyload alt="20220406205752"><br>添加MySQL依赖，数据库连接账号密码记得改成自己的<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205820.png" srcset="/img/loading.gif" lazyload alt="20220406205820"></p>
<h2 id="表单内容中文乱码"><a href="#表单内容中文乱码" class="headerlink" title="表单内容中文乱码"></a>表单内容中文乱码</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210029.png" srcset="/img/loading.gif" lazyload alt="20220406210029"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210037.png" srcset="/img/loading.gif" lazyload alt="20220406210037"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210049.png" srcset="/img/loading.gif" lazyload alt="20220406210049"><br>解决方法<br>     &#x2F;&#x2F;get方式目前不需要设置编码（基于tomcat8）<br>        &#x2F;&#x2F;如果是get请求发送的中文数据，转码稍微有点麻烦（tomcat8之前）<br>        String fname &#x3D; request.getParameter(“fname”);<br>        &#x2F;&#x2F;1.将字符串打散成字节数组<br>        byte[] bytes &#x3D; fname.getBytes(“ISO-8859-1”);<br>        &#x2F;&#x2F;2.将字节数组按照设定的编码重新组装成字符串<br>        fname &#x3D; new String(bytes,”UTF-8”);</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210316.png" srcset="/img/loading.gif" lazyload alt="20220406210316"></p>
<h2 id="review"><a href="#review" class="headerlink" title="review"></a>review</h2><ol>
<li>新建项目 - 新建模块</li>
<li>在模块中添加web</li>
<li>创建artifact - 部署包</li>
<li>lib - artifact<br>先有artifact，后来才添加的mysql.jar。此时，这个jar包并没有添加到部署包中<br>那么在projectSettings中有一个Problems中会有提示的,我们点击fix选择add to…<br>另外，我们也可以直接把lib文件夹直接新建在WEB-INF下。<br>这样不好的地方是这个lib只能是当前这个moudle独享。如果有第二个moudle我们需要再次重复的新建lib。</li>
<li>在部署的时候，修改application Context。然后再回到server选项卡，检查URL的值。<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212420.png" srcset="/img/loading.gif" lazyload alt="20220406212420"><br>URL的值指的是tomcat启动完成后自动打开你指定的浏览器，然后默认访问的网址。<br>启动后，报错404.404意味着找不到指定的资源。<br>如果我们的网址是：<a target="_blank" rel="noopener" href="http://localhost:8080/pro01/">http://localhost:8080/pro01/</a> , 那么表明我们访问的是index.html.<br>我们可以通过<welcome-file-list>标签进行设置欢迎页(在tomcat的web.xml中设置，或者在自己项目的web.xml中设置)</li>
<li>405问题。当前请求的方法不支持。比如，我们表单method&#x3D;post , 那么Servlet必须对应doPost。否则报405错误。</li>
<li>空指针或者是<code>NumberFormatException</code> 。因为有价格和库存。如果价格取不到，结果你想对null进行<code>Integer.parseInt()</code>就会报错。错误的原因大部分是因为 <code>name=&quot;price&quot;</code>此处写错了，结果在Servlet端还是使用<code>request.getParameter(&quot;price&quot;)</code>去获取。</li>
<li><url-pattern>中以斜杠开头</li>
</ol>
<h2 id="500"><a href="#500" class="headerlink" title="500"></a>500</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212908.png" srcset="/img/loading.gif" lazyload alt="20220406212908"></p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212929.png" srcset="/img/loading.gif" lazyload alt="20220406212929"> </p>
<h2 id="p23-Day4"><a href="#p23-Day4" class="headerlink" title="p23 Day4"></a>p23 Day4</h2><ol>
<li><p>设置编码<br> tomcat8之前，设置编码：<br>   1)get请求方式：<br> &#x2F;&#x2F;get方式目前不需要设置编码（基于tomcat8）<br> &#x2F;&#x2F;如果是get请求发送的中文数据，转码稍微有点麻烦（tomcat8之前）<br> String fname &#x3D; request.getParameter(“fname”);<br> &#x2F;&#x2F;1.将字符串打散成字节数组<br> byte[] bytes &#x3D; fname.getBytes(“ISO-8859-1”);<br> &#x2F;&#x2F;2.将字节数组按照设定的编码重新组装成字符串<br> fname &#x3D; new String(bytes,”UTF-8”);<br>   2)post请求方式：<br> request.setCharacterEncoding(“UTF-8”);<br> tomcat8开始，设置编码，只需要针对post方式<br> request.setCharacterEncoding(“UTF-8”);<br> 注意：<br> 需要注意的是，设置编码(post)这一句代码必须在所有的获取参数动作之前</p>
</li>
<li><p>Servlet的继承关系 - 重点查看的是服务方法（service()）</p>
<ol>
<li><p>继承关系<br>   javax.servlet.Servlet接口<br>   javax.servlet.GenericServlet抽象类<br>   javax.servlet.http.HttpServlet抽象子类</p>
</li>
<li><p>相关方法<br>   javax.servlet.Servlet接口:<br> void init(config) - 初始化方法<br> void service(request,response) - 服务方法<br> void destory() - 销毁方法</p>
</li>
</ol>
<p>   javax.servlet.GenericServlet抽象类：<br>     void service(request,response) - 仍然是抽象的</p>
<p>   javax.servlet.http.HttpServlet 抽象子类：<br>     void service(request,response) - 不是抽象的<br>     1. String method &#x3D; req.getMethod(); 获取请求的方式<br>     2. 各种if判断，根据请求方式不同，决定去调用不同的do方法<br>         if (method.equals(“GET”)) {<br>             this.doGet(req,resp);<br>         } else if (method.equals(“HEAD”)) {<br>             this.doHead(req, resp);<br>         } else if (method.equals(“POST”)) {<br>             this.doPost(req, resp);<br>         } else if (method.equals(“PUT”)) {<br>     3. 在HttpServlet这个抽象类中，do方法都差不多:<br>     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>         String protocol &#x3D; req.getProtocol();<br>         String msg &#x3D; lStrings.getString(“http.method_get_not_supported”);<br>         if (protocol.endsWith(“1.1”)) {<br>             resp.sendError(405, msg);<br>         } else {<br>             resp.sendError(400, msg);<br>         }<br>     }<br> 3.小结：</p>
<ol>
<li>继承关系： HttpServlet -&gt; GenericServlet -&gt; Servlet</li>
<li>Servlet中的核心方法： init() , service() , destroy()</li>
<li>服务方法： 当有请求过来时，service方法会自动响应（其实是tomcat容器调用的）<br> 在HttpServlet中我们会去分析请求的方式：到底是get、post、head还是delete等等<br> 然后再决定调用的是哪个do开头的方法<br> 那么在HttpServlet中这些do方法默认都是405的实现风格-要我们子类去实现对应的方法，否则默认会报405错误</li>
<li>因此，我们在新建Servlet时，我们才会去考虑请求方法，从而决定重写哪个do方法</li>
</ol>
</li>
<li><p>Servlet的生命周期<br> 1） 生命周期：从出生到死亡的过程就是生命周期。对应Servlet中的三个方法：init(),service(),destroy()<br> 2） 默认情况下：<br> 第一次接收请求时，这个Servlet会进行实例化(调用构造方法)、初始化(调用init())、然后服务(调用service())<br> 从第二次请求开始，每一次都是服务<br> 当容器关闭时，其中的所有的servlet实例会被销毁，调用销毁方法<br> 3） 通过案例我们发现：<br> - Servlet实例tomcat只会创建一个，所有的请求都是这个实例去响应。<br> - 默认情况下，第一次请求时，tomcat才会去实例化，初始化，然后再服务.这样的好处是什么？ 提高系统的启动速度 。 这样的缺点是什么？ 第一次请求时，耗时较长。<br> - 因此得出结论： 如果需要提高系统的启动速度，当前默认情况就是这样。如果需要提高响应速度，我们应该设置Servlet的初始化时机。<br> 4） Servlet的初始化时机：<br> - 默认是第一次接收请求时，实例化，初始化<br> - 我们可以通过<load-on-startup>来设置servlet启动的先后顺序,数字越小，启动越靠前，最小值0<br> 5） Servlet在容器中是：单例的、线程不安全的<img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406230015.png" srcset="/img/loading.gif" lazyload alt="20220406230015"><br> - 单例：所有的请求都是同一个实例去响应<br> - 线程不安全：一个线程需要根据这个实例中的某个成员变量值去做逻辑判断。但是在中间某个时机，另一个线程改变了这个成员变量的值，从而导致第一个线程的执行路径发生了变化<br> - 我们已经知道了servlet是线程不安全的，给我们的启发是： 尽量的不要在servlet中定义成员变量。如果不得不定义成员变量，那么不要去：①不要去修改成员变量的值 ②不要去根据成员变量的值做一些逻辑判断</p>
</li>
<li><p>Http协议<br> 1） Http 称之为 超文本传输协议<br> 2） Http是无状态的<br> 3） Http请求响应包含两个部分：请求和响应</p>
<ul>
<li>请求：<br>请求包含三个部分： 1.请求行 ； 2.请求消息头 ； 3.请求主体<br>1)请求行包含是三个信息： 1. 请求的方式 ； 2.请求的URL ； 3.请求的协议（一般都是HTTP1.1）<br>2)请求消息头中包含了很多客户端需要告诉服务器的信息，比如：我的浏览器型号、版本、我能接收的内容的类型、我给你发的内容的类型、内容的长度等等<br>3)请求体，三种情况<br>  get方式，没有请求体，但是有一个queryString<br>  post方式，有请求体，form data<br>  json格式，有请求体，request payload</li>
<li>响应：<br>响应也包含三本： 1. 响应行 ； 2.响应头 ； 3.响应体<br>1)响应行包含三个信息：1.协议 2.响应状态码(200) 3.响应状态(ok)<br>2)响应头：包含了服务器的信息；服务器发送给浏览器的信息（内容的媒体类型、编码、内容长度等）<br>3)响应体：响应的实际内容（比如请求add.html页面时，响应的内容就是<html><head><body>&lt;form….）</li>
</ul>
</li>
<li><p>会话<br> 1） Http是无状态的<br> - HTTP 无状态 ：服务器无法判断这两次请求是同一个客户端发过来的，还是不同的客户端发过来的<br> - 无状态带来的现实问题：第一次请求是添加商品到购物车，第二次请求是结账；如果这两次请求服务器无法区分是同一个用户的，那么就会导致混乱<br> - 通过会话跟踪技术来解决无状态的问题。<br> 2） 会话跟踪技术<br> - 客户端第一次发请求给服务器，服务器获取session，获取不到，则创建新的，然后响应给客户端<br> - 下次客户端给服务器发请求时，会把sessionID带给服务器，那么服务器就能获取到了，那么服务器就判断这一次请求和上次某次请求是同一个客户端，从而能够区分开客户端<br> - 常用的API：<br>   request.getSession() -&gt; 获取当前的会话，没有则创建一个新的会话<br>   request.getSession(true) -&gt; 效果和不带参数相同<br>   request.getSession(false) -&gt; 获取当前会话，没有则返回null，不会创建新的<br><br>   session.getId() -&gt; 获取sessionID<br>   session.isNew() -&gt; 判断当前session是否是新的<br>   session.getMaxInactiveInterval() -&gt; session的非激活间隔时长，默认1800秒<br>   session.setMaxInactiveInterval()<br>   session.invalidate() -&gt; 强制性让会话立即失效<br>   ….<br> 3） session保存作用域</p>
<ul>
<li>session保存作用域是和具体的某一个session对应的</li>
<li>常用的API：<br>void session.setAttribute(k,v)<br>Object session.getAttribute(k)<br>void removeAttribute(k)</li>
</ul>
</li>
<li><p>服务器内部转发以及客户端重定向<br> 1） 服务器内部转发 : request.getRequestDispatcher(“…”).forward(request,response);</p>
<ul>
<li>一次请求响应的过程，对于客户端而言，内部经过了多少次转发，客户端是不知道的</li>
<li>地址栏没有变化<br> 2） 客户端重定向： response.sendRedirect(“….”);</li>
<li>两次请求响应的过程。客户端肯定知道请求URL有变化</li>
<li>地址栏有变化</li>
</ul>
</li>
<li><p>Thymeleaf - 视图模板技术<br> 1） 添加thymeleaf的jar包<br> 2） 新建一个Servlet类ViewBaseServlet<br> 3） 在web.xml文件中添加配置<br>- 配置前缀 view-prefix<br>- 配置后缀 view-suffix<br> 4） 使得我们的Servlet继承ViewBaseServlet</p>
<p> 5） 根据逻辑视图名称 得到 物理视图名称<br> &#x2F;&#x2F;此处的视图名称是 index<br> &#x2F;&#x2F;那么thymeleaf会将这个 逻辑视图名称 对应到 物理视图 名称上去<br> &#x2F;&#x2F;逻辑视图名称 ：   index<br> &#x2F;&#x2F;物理视图名称 ：   view-prefix + 逻辑视图名称 + view-suffix<br> &#x2F;&#x2F;所以真实的视图名称是：      &#x2F;       index       .html<br> super.processTemplate(“index”,request,response);<br> 6） 使用thymeleaf的标签<br>   th:if   ,  th:unless   , th:each   ,   th:text</p>
</li>
</ol>
<p>&#x2F;&#x2F; 200 : 正常响应<br>&#x2F;&#x2F; 404 : 找不到资源<br>&#x2F;&#x2F; 405 : 请求方式不支持<br>&#x2F;&#x2F; 500 : 服务器内部错误</p>
<h2 id="IDEA断点调试"><a href="#IDEA断点调试" class="headerlink" title="IDEA断点调试"></a>IDEA断点调试</h2><h2 id="thyme-leaf"><a href="#thyme-leaf" class="headerlink" title="thyme leaf"></a>thyme leaf</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419150228.png" srcset="/img/loading.gif" lazyload alt="20220419150228"></p>
<ol start="7">
<li>Thymeleaf - 视图模板技术<br> 1） 添加thymeleaf的jar包(maven用pom)<br> 2） 新建一个Servlet类ViewBaseServlet（用了框架会被取代）<br> 3） 在web.xml文件中添加配置<br>- 配置前缀 view-prefix<br>- 配置后缀 view-suffix<br> 4） 使得我们的Servlet继承ViewBaseServlet<br> 5） 根据逻辑视图名称 得到 物理视图名称<br> &#x2F;&#x2F;此处的视图名称是 index<br> &#x2F;&#x2F;那么thymeleaf会将这个 逻辑视图名称 对应到 物理视图 名称上去<br> &#x2F;&#x2F;逻辑视图名称 ：   index<br> &#x2F;&#x2F;物理视图名称 ：   view-prefix + 逻辑视图名称 + view-suffix<br> &#x2F;&#x2F;所以真实的视图名称是：      &#x2F;       index       .html<br> super.processTemplate(“index”,request,response);<br> 6） 使用thymeleaf的标签<br>   th:if   ,  th:unless   , th:each   ,   th:text<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419161700.png" srcset="/img/loading.gif" lazyload alt="20220419161700"></li>
</ol>
<h2 id="P32-pro10-fruit1-5-thymeleaf"><a href="#P32-pro10-fruit1-5-thymeleaf" class="headerlink" title="P32 pro10-fruit1.5-thymeleaf"></a>P32 pro10-fruit1.5-thymeleaf</h2><p>review:</p>
<ol>
<li><p>post提交方式下的设置编码，防止中文乱码<br>request.setCharacterEncoding(“utf-8”);<br>get提交方式，tomcat8开始，编码不需要设置<br>tomcat8之前，get方式设置比较麻烦：<br>String fname &#x3D; request.getParameter(“fname”);<br>byte[] bytes &#x3D; fname.getBytes(“iso-8859-1”);<br>fname &#x3D; new String(bytes,”UTF-8”);</p>
</li>
<li><p>Servlet继承关系以及生命周期<br>1） Servlet接口 ： init() , service() , destroy()<br>GenericServlet抽象子类： abstract service();<br>HttpServlet抽象子类：实现了service方法，在service方法内部通过request.getMethod()来判断请求的方式，<br>     然后根据请求的方式去调用内部的do方法。每一个do方法进行了简单实现，主要是如果请求方式不符合，则报405错误。<br>     目的是让我们的Servlet子类去重写对应的方法（如果重写的不对，则使用父类的405错误实现）<br>2） 生命周期：实例化、初始化、服务、销毁<br> - Tomcat负责维护Servlet实例的生命周期<br> - 每个Servlet在Tomcat容器中只有一个实例，它是线程不安全的<br> - Servlet的启动时机：<load-on-startup><br> - Servlet3.0开始支持注解: @WebServlet</p>
</li>
<li><p>HTTP协议：<br>1） 由 Request 和 Response 两部分组成<br>2） 请求包含了三部分：请求行、请求消息头、请求主体： 普通的get方式请求-query string；post方式- form data ； json格式 - request payload<br>3） 响应包含了三部分：响应行、响应消息头、响应主体</p>
</li>
<li><p>HttpSession<br>1） HttpSession ：表示 会话<br>2） 为什么需要HttpSession ， 原因是因为 Http协议是无状态的<br>3） Session保存作用域 ：一次会话范围都有效 ； void session.setAttribute(k,v) ,Object session.getAttribute(k)<br>4） 其他的API： session.getId() , session.isNew() , session.getCreationTime() , session.invalidate() 等等</p>
</li>
<li><p>服务器端转发和客户端重定向</p>
<ol>
<li>服务器端转发 ： request.getRequestDispatcher(“index.html”).forward(request,response);</li>
<li>客户端重定向： response.sendRedirect(“index.html”);</li>
</ol>
</li>
<li><p>thymeleaf的部分标签<br>1） 使用步骤： 添加jar ， 新建ViewBaseServlet(有两个方法） ， 配置两个<context-param> : view-prefix , view-suffix<br>2） 部分标签： <a href="th:if">th:if</a> , <a href="th:unless">th:unless</a> , <a href="th:each">th:each</a> , <a href="th:text">th:text</a></p>
</li>
</ol>
<p>今日内容：</p>
<ol>
<li><p>保存作用域<br>原始情况下，保存作用域我们可以认为有四个： page（页面级别，现在几乎不用） , request（一次请求响应范围） , session（一次会话范围） , application（整个应用程序范围）<br>1） request：一次请求响应范围<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419171758.png" srcset="/img/loading.gif" lazyload alt="20220419171758"><br>2） session：一次会话范围有效<br>   <img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172739.png" srcset="/img/loading.gif" lazyload alt="20220419172739"><br>3） application： 一次应用程序范围有效<br> <img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172925.png" srcset="/img/loading.gif" lazyload alt="20220419172925"></p>
</li>
<li><p>路径问题<br>1） 相对路径<br>2） 绝对路径<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419173729.png" srcset="/img/loading.gif" lazyload alt="20220419173729"></p>
</li>
<li><p>实现库存系统的功能</p>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%AC%94%E8%AE%B0/">#笔记</a>
      
        <a href="/tags/javawev/">#javawev</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Javaweb</div>
      <div>http://example.com/2022/04/06/Javaweb/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Yuki</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年4月6日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/07/BootStrap/" title="BootStrap">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">BootStrap</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/05/%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91OSS%E6%9B%BF%E6%8D%A2GitHub%E5%9B%BE%E5%BA%8A/" title="使用阿里云OSS替换GitHub图床">
                        <span class="hidden-mobile">使用阿里云OSS替换GitHub图床</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
