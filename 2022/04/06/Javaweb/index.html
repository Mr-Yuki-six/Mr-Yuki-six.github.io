<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Javaweb | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="！">
<meta property="og:type" content="article">
<meta property="og:title" content="Javaweb">
<meta property="og:url" content="http://example.com/2022/04/06/Javaweb/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165550.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165617.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170451.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170620.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406171436.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172121.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172248.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172609.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406174814.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211543.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211615.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406175001.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406215032.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182511.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182708.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183542.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183553.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183617.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406202338.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205148.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205752.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205820.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210029.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210037.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210049.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210316.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212420.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212908.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212929.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406230015.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419150228.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419161700.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419171758.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172739.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172925.png">
<meta property="og:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419173729.png">
<meta property="article:published_time" content="2022-04-06T08:48:25.000Z">
<meta property="article:modified_time" content="2022-08-29T13:20:33.907Z">
<meta property="article:author" content="Yuki">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="javawev">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Javaweb" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/04/06/Javaweb/" class="article-date">
  <time class="dt-published" datetime="2022-04-06T08:48:25.000Z" itemprop="datePublished">2022-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Javaweb
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>！</p>
<span id="more"></span>
<h2 id="CS和BS的异同点"><a href="#CS和BS的异同点" class="headerlink" title="CS和BS的异同点"></a>CS和BS的异同点</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165128.png" alt="20220406165128"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165550.png" alt="20220406165550"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406165617.png" alt="20220406165617"></p>
<p>新建Javaweb<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170451.png" alt="20220406170451"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406170620.png" alt="20220406170620"><br>Project template记得选web application</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406171436.png" alt="20220406171436"><br>上面有个小点</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172121.png" alt="20220406172121"></p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172248.png" alt="20220406172248"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406172609.png" alt="20220406172609"></p>
<h2 id="忘记勾选web-application"><a href="#忘记勾选web-application" class="headerlink" title="忘记勾选web application"></a>忘记勾选web application</h2><p>选中之后点击左上角<code>file</code> 、<code>Project Structure..</code><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406174814.png" alt="20220406174814"></p>
<h2 id="导入别人的项目也没有蓝色小点"><a href="#导入别人的项目也没有蓝色小点" class="headerlink" title="导入别人的项目也没有蓝色小点"></a>导入别人的项目也没有蓝色小点</h2><p>web项目需要部署到tomcat里去（部署包），这个部署包称为Artifact<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211543.png" alt="20220406211543"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406211615.png" alt="20220406211615"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406175001.png" alt="20220406175001"></p>
<h2 id="JDBC内容"><a href="#JDBC内容" class="headerlink" title="JDBC内容"></a>JDBC内容</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406215032.png" alt="20220406215032"></p>
<h3 id="BaseDAO"><a href="#BaseDAO" class="headerlink" title="BaseDAO"></a><code>BaseDAO</code></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuki.demo07javawebbegin.fruit.dao.base;<span class="comment">//路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.ParameterizedType;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseDAO</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DRIVER</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> ;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">URL</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/fruitdb?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">USER</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;<span class="comment">//数据库用户名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">PWD</span> <span class="operator">=</span> <span class="string">&quot;109372&quot;</span> ;<span class="comment">//数据库密码</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Connection conn ;</span><br><span class="line">    <span class="keyword">protected</span> PreparedStatement psmt ;</span><br><span class="line">    <span class="keyword">protected</span> ResultSet rs ;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//T的Class对象</span></span><br><span class="line">    <span class="keyword">private</span> Class entityClass ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BaseDAO</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//getClass() 获取Class对象，当前我们执行的是new FruitDAOImpl() , 创建的是FruitDAOImpl的实例</span></span><br><span class="line">        <span class="comment">//那么子类构造方法内部首先会调用父类（BaseDAO）的无参构造方法</span></span><br><span class="line">        <span class="comment">//因此此处的getClass()会被执行，但是getClass获取的是FruitDAOImpl的Class</span></span><br><span class="line">        <span class="comment">//所以getGenericSuperclass()获取到的是BaseDAO的Class</span></span><br><span class="line">        <span class="type">Type</span> <span class="variable">genericType</span> <span class="operator">=</span> getClass().getGenericSuperclass();</span><br><span class="line">        <span class="comment">//ParameterizedType 参数化类型</span></span><br><span class="line">        Type[] actualTypeArguments = ((ParameterizedType) genericType).getActualTypeArguments();</span><br><span class="line">        <span class="comment">//获取到的&lt;T&gt;中的T的真实的类型</span></span><br><span class="line">        <span class="type">Type</span> <span class="variable">actualType</span> <span class="operator">=</span> actualTypeArguments[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            entityClass = Class.forName(actualType.getTypeName());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Connection <span class="title function_">getConn</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.加载驱动</span></span><br><span class="line">            Class.forName(DRIVER);</span><br><span class="line">            <span class="comment">//2.通过驱动管理器获取连接对象</span></span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(URL, USER, PWD);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet rs , PreparedStatement psmt , Connection conn)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(psmt!=<span class="literal">null</span>)&#123;</span><br><span class="line">                psmt.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span> &amp;&amp; !conn.isClosed())&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//给预处理命令对象设置参数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setParams</span><span class="params">(PreparedStatement psmt , Object... params)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">if</span>(params!=<span class="literal">null</span> &amp;&amp; params.length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                psmt.setObject(i+<span class="number">1</span>,params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行更新，返回影响行数</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql , Object... params)</span>&#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">insertFlag</span> <span class="operator">=</span> <span class="literal">false</span> ;</span><br><span class="line">        insertFlag = sql.trim().toUpperCase().startsWith(<span class="string">&quot;INSERT&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = getConn();</span><br><span class="line">            <span class="keyword">if</span>(insertFlag)&#123;</span><br><span class="line">                psmt = conn.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                psmt = conn.prepareStatement(sql);</span><br><span class="line">            &#125;</span><br><span class="line">            setParams(psmt,params);</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> psmt.executeUpdate() ;</span><br><span class="line"></span><br><span class="line">            rs = psmt.getGeneratedKeys();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="keyword">return</span> ((Long)rs.getLong(<span class="number">1</span>)).intValue();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> count ;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            close(rs,psmt,conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过反射技术给obj对象的property属性赋propertyValue值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setValue</span><span class="params">(Object obj ,  String property , Object propertyValue)</span>&#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> obj.getClass();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取property这个字符串对应的属性名 ， 比如 &quot;fid&quot;  去找 obj对象中的 fid 属性</span></span><br><span class="line">            <span class="type">Field</span> <span class="variable">field</span> <span class="operator">=</span> clazz.getDeclaredField(property);</span><br><span class="line">            <span class="keyword">if</span>(field!=<span class="literal">null</span>)&#123;</span><br><span class="line">                field.setAccessible(<span class="literal">true</span>);</span><br><span class="line">                field.set(obj,propertyValue);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchFieldException | IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行复杂查询，返回例如统计结果</span></span><br><span class="line">    <span class="keyword">protected</span> Object[] executeComplexQuery(String sql , Object... params)&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = getConn() ;</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            setParams(psmt,params);</span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//通过rs可以获取结果集的元数据</span></span><br><span class="line">            <span class="comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span></span><br><span class="line"></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">            <span class="comment">//获取结果集的列数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line">            Object[] columnValueArr = <span class="keyword">new</span> <span class="title class_">Object</span>[columnCount];</span><br><span class="line">            <span class="comment">//6.解析rs</span></span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i&lt;columnCount;i++)&#123;</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">columnValue</span> <span class="operator">=</span> rs.getObject(i+<span class="number">1</span>);     <span class="comment">//33    苹果      5</span></span><br><span class="line">                    columnValueArr[i]=columnValue;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> columnValueArr ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            close(rs,psmt,conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行查询，返回单个实体对象</span></span><br><span class="line">    <span class="keyword">protected</span> T <span class="title function_">load</span><span class="params">(String sql , Object... params)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = getConn() ;</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            setParams(psmt,params);</span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//通过rs可以获取结果集的元数据</span></span><br><span class="line">            <span class="comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span></span><br><span class="line"></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">            <span class="comment">//获取结果集的列数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line">            <span class="comment">//6.解析rs</span></span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">T</span> <span class="variable">entity</span> <span class="operator">=</span> (T)entityClass.newInstance();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i&lt;columnCount;i++)&#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> rsmd.getColumnName(i+<span class="number">1</span>);            <span class="comment">//fid   fname   price</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">columnValue</span> <span class="operator">=</span> rs.getObject(i+<span class="number">1</span>);     <span class="comment">//33    苹果      5</span></span><br><span class="line">                    setValue(entity,columnName,columnValue);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> entity ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            close(rs,psmt,conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行查询，返回List</span></span><br><span class="line">    <span class="keyword">protected</span> List&lt;T&gt; <span class="title function_">executeQuery</span><span class="params">(String sql , Object... params)</span>&#123;</span><br><span class="line">        List&lt;T&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = getConn() ;</span><br><span class="line">            psmt = conn.prepareStatement(sql);</span><br><span class="line">            setParams(psmt,params);</span><br><span class="line">            rs = psmt.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//通过rs可以获取结果集的元数据</span></span><br><span class="line">            <span class="comment">//元数据：描述结果集数据的数据 , 简单讲，就是这个结果集有哪些列，什么类型等等</span></span><br><span class="line"></span><br><span class="line">            <span class="type">ResultSetMetaData</span> <span class="variable">rsmd</span> <span class="operator">=</span> rs.getMetaData();</span><br><span class="line">            <span class="comment">//获取结果集的列数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">columnCount</span> <span class="operator">=</span> rsmd.getColumnCount();</span><br><span class="line">            <span class="comment">//6.解析rs</span></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">T</span> <span class="variable">entity</span> <span class="operator">=</span> (T)entityClass.newInstance();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i&lt;columnCount;i++)&#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">columnName</span> <span class="operator">=</span> rsmd.getColumnName(i+<span class="number">1</span>);            <span class="comment">//fid   fname   price</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">columnValue</span> <span class="operator">=</span> rs.getObject(i+<span class="number">1</span>);     <span class="comment">//33    苹果      5</span></span><br><span class="line">                    setValue(entity,columnName,columnValue);</span><br><span class="line">                &#125;</span><br><span class="line">                list.add(entity);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            close(rs,psmt,conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="FruitDAO"><a href="#FruitDAO" class="headerlink" title="FruitDAO"></a>FruitDAO</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuki.demo07javawebbegin.fruit.dao;<span class="comment">//路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuki.demo07javawebbegin.fruit.pojo.Fruit;<span class="comment">//路径</span></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">FruitDAO</span> &#123;</span><br><span class="line">    <span class="comment">//查询库存列表</span></span><br><span class="line">    List&lt;Fruit&gt; <span class="title function_">getFruitList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//新增库存</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">addFruit</span><span class="params">(Fruit fruit)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改库存</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">updateFruit</span><span class="params">(Fruit fruit)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//根据名称查询特定库存</span></span><br><span class="line">    Fruit <span class="title function_">getFruitByFname</span><span class="params">(String fname)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除特定库存记录</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">delFruit</span><span class="params">(String fname)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Fruit"><a href="#Fruit" class="headerlink" title="Fruit"></a>Fruit</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuki.demo07javawebbegin.fruit.pojo;<span class="comment">//路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fruit</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer fid ;</span><br><span class="line">    <span class="keyword">private</span> String fname ;</span><br><span class="line">    <span class="keyword">private</span> Integer price ;</span><br><span class="line">    <span class="keyword">private</span> Integer fcount ;</span><br><span class="line">    <span class="keyword">private</span> String remark ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fruit</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fruit</span><span class="params">(Integer fid, String fname, Integer price, Integer fcount, String remark)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fid = fid;</span><br><span class="line">        <span class="built_in">this</span>.fname = fname;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">        <span class="built_in">this</span>.fcount = fcount;</span><br><span class="line">        <span class="built_in">this</span>.remark = remark;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getFid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFid</span><span class="params">(Integer fid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fid = fid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFname</span><span class="params">(String fname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fname = fname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Integer price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getFcount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fcount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFcount</span><span class="params">(Integer fcount)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.fcount = fcount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRemark</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> remark;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemark</span><span class="params">(String remark)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.remark = remark;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fid + <span class="string">&quot;\t\t&quot;</span> + fname + <span class="string">&quot;\t\t&quot;</span> + price +<span class="string">&quot;\t\t&quot;</span> + fcount +<span class="string">&quot;\t\t&quot;</span> + remark ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="AddServlet"><a href="#AddServlet" class="headerlink" title="AddServlet"></a>AddServlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yuki.demo07javawebbegin.servlets;<span class="comment">//路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.yuki.demo07javawebbegin.fruit.dao.FruitDAO;/路径</span><br><span class="line"><span class="keyword">import</span> com.yuki.demo07javawebbegin.fruit.dao.impl.FruitDAOImpl;<span class="comment">//路径</span></span><br><span class="line"><span class="keyword">import</span> com.yuki.demo07javawebbegin.fruit.pojo.Fruit;<span class="comment">//路径</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> <span class="comment">//获取表单中数据</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//解决中文乱码</span></span><br><span class="line">        <span class="comment">//idea中写dopost自动生成dopost方法</span></span><br><span class="line">        <span class="comment">//super.doPost(req, resp);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span>  req.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">priceStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">price</span> <span class="operator">=</span> Integer.parseInt(priceStr); <span class="comment">//发来只能是字符串，强转成数字</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line">        <span class="comment">//快捷键soutv</span></span><br><span class="line"><span class="comment">/*      System.out.println(&quot;remark = &quot; + remark);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;fcount = &quot; + fcount);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;price = &quot; + price);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;fname = &quot; + fname);*/</span></span><br><span class="line">        <span class="type">FruitDAO</span> <span class="variable">fruitDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FruitDAOImpl</span>();</span><br><span class="line">       <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> fruitDAO.addFruit(<span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="number">0</span>,fname,price,fcount,remark));<span class="comment">//判断是否添加成功</span></span><br><span class="line">        System.out.println(flag ?<span class="string">&quot;添加成功！&quot;</span> : <span class="string">&quot;添加失败！&quot;</span>);<span class="comment">//控制台打印结果</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<h2 id="接收表单数据"><a href="#接收表单数据" class="headerlink" title="接收表单数据"></a>接收表单数据</h2><p>创建AddServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> <span class="comment">//获取表单中数据</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//idea中写dopost自动生成dopost方法</span></span><br><span class="line">        <span class="comment">//super.doPost(req, resp);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fname</span> <span class="operator">=</span>  req.getParameter(<span class="string">&quot;fname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">priceStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;price&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">price</span> <span class="operator">=</span> Integer.parseInt(priceStr); <span class="comment">//发来只能是字符串，强转成数字</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fcountStr</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;fcount&quot;</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">fcount</span> <span class="operator">=</span> Integer.parseInt(fcountStr);</span><br><span class="line">        <span class="type">String</span> <span class="variable">remark</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;remark&quot;</span>);</span><br><span class="line">        <span class="comment">//快捷键soutv</span></span><br><span class="line">        System.out.println(<span class="string">&quot;remark = &quot;</span> + remark);</span><br><span class="line">        System.out.println(<span class="string">&quot;fcount = &quot;</span> + fcount);</span><br><span class="line">        System.out.println(<span class="string">&quot;price = &quot;</span> + price);</span><br><span class="line">        System.out.println(<span class="string">&quot;fname = &quot;</span> + fname);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后编写web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AddServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        com.yuki.demo07javawebbegin.servlets.AddServlet</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AddServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/add<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182511.png" alt="20220406182511"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406182708.png" alt="20220406182708"></p>
<ol>
<li>用户发请求，action&#x3D;add</li>
<li>项目中，web.xml中找到url-pattern &#x3D; &#x2F;add   -&gt; 第14行</li>
<li>找第13行的servlet-name &#x3D; AddServlet</li>
<li>找和servlet-mapping中servlet-name一致的servlet ， 找到第7行</li>
<li>找第8行的servlet-class -&gt;  com.yuki.demo07javawebbegin.servlets.AddServlet</li>
<li>用户发送的是post请求（method&#x3D;post） ， 因此 tomcat会执行AddServlet中的doPost方法</li>
</ol>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183542.png" alt="20220406183542"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183553.png" alt="20220406183553"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406183617.png" alt="20220406183617"></p>
<h2 id="idea中空文件夹自动合并"><a href="#idea中空文件夹自动合并" class="headerlink" title="idea中空文件夹自动合并"></a>idea中空文件夹自动合并</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406202338.png" alt="20220406202338"></p>
<h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205148.png" alt="20220406205148"><br>解决方法<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205752.png" alt="20220406205752"><br>添加MySQL依赖，数据库连接账号密码记得改成自己的<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406205820.png" alt="20220406205820"></p>
<h2 id="表单内容中文乱码"><a href="#表单内容中文乱码" class="headerlink" title="表单内容中文乱码"></a>表单内容中文乱码</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210029.png" alt="20220406210029"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210037.png" alt="20220406210037"><br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210049.png" alt="20220406210049"><br>解决方法<br>     &#x2F;&#x2F;get方式目前不需要设置编码（基于tomcat8）<br>        &#x2F;&#x2F;如果是get请求发送的中文数据，转码稍微有点麻烦（tomcat8之前）<br>        String fname &#x3D; request.getParameter(“fname”);<br>        &#x2F;&#x2F;1.将字符串打散成字节数组<br>        byte[] bytes &#x3D; fname.getBytes(“ISO-8859-1”);<br>        &#x2F;&#x2F;2.将字节数组按照设定的编码重新组装成字符串<br>        fname &#x3D; new String(bytes,”UTF-8”);</p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406210316.png" alt="20220406210316"></p>
<h2 id="review"><a href="#review" class="headerlink" title="review"></a>review</h2><ol>
<li>新建项目 - 新建模块</li>
<li>在模块中添加web</li>
<li>创建artifact - 部署包</li>
<li>lib - artifact<br>先有artifact，后来才添加的mysql.jar。此时，这个jar包并没有添加到部署包中<br>那么在projectSettings中有一个Problems中会有提示的,我们点击fix选择add to…<br>另外，我们也可以直接把lib文件夹直接新建在WEB-INF下。<br>这样不好的地方是这个lib只能是当前这个moudle独享。如果有第二个moudle我们需要再次重复的新建lib。</li>
<li>在部署的时候，修改application Context。然后再回到server选项卡，检查URL的值。<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212420.png" alt="20220406212420"><br>URL的值指的是tomcat启动完成后自动打开你指定的浏览器，然后默认访问的网址。<br>启动后，报错404.404意味着找不到指定的资源。<br>如果我们的网址是：<a target="_blank" rel="noopener" href="http://localhost:8080/pro01/">http://localhost:8080/pro01/</a> , 那么表明我们访问的是index.html.<br>我们可以通过<welcome-file-list>标签进行设置欢迎页(在tomcat的web.xml中设置，或者在自己项目的web.xml中设置)</li>
<li>405问题。当前请求的方法不支持。比如，我们表单method&#x3D;post , 那么Servlet必须对应doPost。否则报405错误。</li>
<li>空指针或者是<code>NumberFormatException</code> 。因为有价格和库存。如果价格取不到，结果你想对null进行<code>Integer.parseInt()</code>就会报错。错误的原因大部分是因为 <code>name=&quot;price&quot;</code>此处写错了，结果在Servlet端还是使用<code>request.getParameter(&quot;price&quot;)</code>去获取。</li>
<li><url-pattern>中以斜杠开头</li>
</ol>
<h2 id="500"><a href="#500" class="headerlink" title="500"></a>500</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212908.png" alt="20220406212908"></p>
<p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406212929.png" alt="20220406212929"> </p>
<h2 id="p23-Day4"><a href="#p23-Day4" class="headerlink" title="p23 Day4"></a>p23 Day4</h2><ol>
<li><p>设置编码<br> tomcat8之前，设置编码：<br>   1)get请求方式：<br> &#x2F;&#x2F;get方式目前不需要设置编码（基于tomcat8）<br> &#x2F;&#x2F;如果是get请求发送的中文数据，转码稍微有点麻烦（tomcat8之前）<br> String fname &#x3D; request.getParameter(“fname”);<br> &#x2F;&#x2F;1.将字符串打散成字节数组<br> byte[] bytes &#x3D; fname.getBytes(“ISO-8859-1”);<br> &#x2F;&#x2F;2.将字节数组按照设定的编码重新组装成字符串<br> fname &#x3D; new String(bytes,”UTF-8”);<br>   2)post请求方式：<br> request.setCharacterEncoding(“UTF-8”);<br> tomcat8开始，设置编码，只需要针对post方式<br> request.setCharacterEncoding(“UTF-8”);<br> 注意：<br> 需要注意的是，设置编码(post)这一句代码必须在所有的获取参数动作之前</p>
</li>
<li><p>Servlet的继承关系 - 重点查看的是服务方法（service()）</p>
<ol>
<li><p>继承关系<br>   javax.servlet.Servlet接口<br>   javax.servlet.GenericServlet抽象类<br>   javax.servlet.http.HttpServlet抽象子类</p>
</li>
<li><p>相关方法<br>   javax.servlet.Servlet接口:<br> void init(config) - 初始化方法<br> void service(request,response) - 服务方法<br> void destory() - 销毁方法</p>
</li>
</ol>
<p>   javax.servlet.GenericServlet抽象类：<br>     void service(request,response) - 仍然是抽象的</p>
<p>   javax.servlet.http.HttpServlet 抽象子类：<br>     void service(request,response) - 不是抽象的<br>     1. String method &#x3D; req.getMethod(); 获取请求的方式<br>     2. 各种if判断，根据请求方式不同，决定去调用不同的do方法<br>         if (method.equals(“GET”)) {<br>             this.doGet(req,resp);<br>         } else if (method.equals(“HEAD”)) {<br>             this.doHead(req, resp);<br>         } else if (method.equals(“POST”)) {<br>             this.doPost(req, resp);<br>         } else if (method.equals(“PUT”)) {<br>     3. 在HttpServlet这个抽象类中，do方法都差不多:<br>     protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>         String protocol &#x3D; req.getProtocol();<br>         String msg &#x3D; lStrings.getString(“http.method_get_not_supported”);<br>         if (protocol.endsWith(“1.1”)) {<br>             resp.sendError(405, msg);<br>         } else {<br>             resp.sendError(400, msg);<br>         }<br>     }<br> 3.小结：</p>
<ol>
<li>继承关系： HttpServlet -&gt; GenericServlet -&gt; Servlet</li>
<li>Servlet中的核心方法： init() , service() , destroy()</li>
<li>服务方法： 当有请求过来时，service方法会自动响应（其实是tomcat容器调用的）<br> 在HttpServlet中我们会去分析请求的方式：到底是get、post、head还是delete等等<br> 然后再决定调用的是哪个do开头的方法<br> 那么在HttpServlet中这些do方法默认都是405的实现风格-要我们子类去实现对应的方法，否则默认会报405错误</li>
<li>因此，我们在新建Servlet时，我们才会去考虑请求方法，从而决定重写哪个do方法</li>
</ol>
</li>
<li><p>Servlet的生命周期<br> 1） 生命周期：从出生到死亡的过程就是生命周期。对应Servlet中的三个方法：init(),service(),destroy()<br> 2） 默认情况下：<br> 第一次接收请求时，这个Servlet会进行实例化(调用构造方法)、初始化(调用init())、然后服务(调用service())<br> 从第二次请求开始，每一次都是服务<br> 当容器关闭时，其中的所有的servlet实例会被销毁，调用销毁方法<br> 3） 通过案例我们发现：<br> - Servlet实例tomcat只会创建一个，所有的请求都是这个实例去响应。<br> - 默认情况下，第一次请求时，tomcat才会去实例化，初始化，然后再服务.这样的好处是什么？ 提高系统的启动速度 。 这样的缺点是什么？ 第一次请求时，耗时较长。<br> - 因此得出结论： 如果需要提高系统的启动速度，当前默认情况就是这样。如果需要提高响应速度，我们应该设置Servlet的初始化时机。<br> 4） Servlet的初始化时机：<br> - 默认是第一次接收请求时，实例化，初始化<br> - 我们可以通过<load-on-startup>来设置servlet启动的先后顺序,数字越小，启动越靠前，最小值0<br> 5） Servlet在容器中是：单例的、线程不安全的<img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220406230015.png" alt="20220406230015"><br> - 单例：所有的请求都是同一个实例去响应<br> - 线程不安全：一个线程需要根据这个实例中的某个成员变量值去做逻辑判断。但是在中间某个时机，另一个线程改变了这个成员变量的值，从而导致第一个线程的执行路径发生了变化<br> - 我们已经知道了servlet是线程不安全的，给我们的启发是： 尽量的不要在servlet中定义成员变量。如果不得不定义成员变量，那么不要去：①不要去修改成员变量的值 ②不要去根据成员变量的值做一些逻辑判断</p>
</li>
<li><p>Http协议<br> 1） Http 称之为 超文本传输协议<br> 2） Http是无状态的<br> 3） Http请求响应包含两个部分：请求和响应</p>
<ul>
<li>请求：<br>请求包含三个部分： 1.请求行 ； 2.请求消息头 ； 3.请求主体<br>1)请求行包含是三个信息： 1. 请求的方式 ； 2.请求的URL ； 3.请求的协议（一般都是HTTP1.1）<br>2)请求消息头中包含了很多客户端需要告诉服务器的信息，比如：我的浏览器型号、版本、我能接收的内容的类型、我给你发的内容的类型、内容的长度等等<br>3)请求体，三种情况<br>  get方式，没有请求体，但是有一个queryString<br>  post方式，有请求体，form data<br>  json格式，有请求体，request payload</li>
<li>响应：<br>响应也包含三本： 1. 响应行 ； 2.响应头 ； 3.响应体<br>1)响应行包含三个信息：1.协议 2.响应状态码(200) 3.响应状态(ok)<br>2)响应头：包含了服务器的信息；服务器发送给浏览器的信息（内容的媒体类型、编码、内容长度等）<br>3)响应体：响应的实际内容（比如请求add.html页面时，响应的内容就是<html><head><body>&lt;form….）</li>
</ul>
</li>
<li><p>会话<br> 1） Http是无状态的<br> - HTTP 无状态 ：服务器无法判断这两次请求是同一个客户端发过来的，还是不同的客户端发过来的<br> - 无状态带来的现实问题：第一次请求是添加商品到购物车，第二次请求是结账；如果这两次请求服务器无法区分是同一个用户的，那么就会导致混乱<br> - 通过会话跟踪技术来解决无状态的问题。<br> 2） 会话跟踪技术<br> - 客户端第一次发请求给服务器，服务器获取session，获取不到，则创建新的，然后响应给客户端<br> - 下次客户端给服务器发请求时，会把sessionID带给服务器，那么服务器就能获取到了，那么服务器就判断这一次请求和上次某次请求是同一个客户端，从而能够区分开客户端<br> - 常用的API：<br>   request.getSession() -&gt; 获取当前的会话，没有则创建一个新的会话<br>   request.getSession(true) -&gt; 效果和不带参数相同<br>   request.getSession(false) -&gt; 获取当前会话，没有则返回null，不会创建新的<br><br>   session.getId() -&gt; 获取sessionID<br>   session.isNew() -&gt; 判断当前session是否是新的<br>   session.getMaxInactiveInterval() -&gt; session的非激活间隔时长，默认1800秒<br>   session.setMaxInactiveInterval()<br>   session.invalidate() -&gt; 强制性让会话立即失效<br>   ….<br> 3） session保存作用域</p>
<ul>
<li>session保存作用域是和具体的某一个session对应的</li>
<li>常用的API：<br>void session.setAttribute(k,v)<br>Object session.getAttribute(k)<br>void removeAttribute(k)</li>
</ul>
</li>
<li><p>服务器内部转发以及客户端重定向<br> 1） 服务器内部转发 : request.getRequestDispatcher(“…”).forward(request,response);</p>
<ul>
<li>一次请求响应的过程，对于客户端而言，内部经过了多少次转发，客户端是不知道的</li>
<li>地址栏没有变化<br> 2） 客户端重定向： response.sendRedirect(“….”);</li>
<li>两次请求响应的过程。客户端肯定知道请求URL有变化</li>
<li>地址栏有变化</li>
</ul>
</li>
<li><p>Thymeleaf - 视图模板技术<br> 1） 添加thymeleaf的jar包<br> 2） 新建一个Servlet类ViewBaseServlet<br> 3） 在web.xml文件中添加配置<br>- 配置前缀 view-prefix<br>- 配置后缀 view-suffix<br> 4） 使得我们的Servlet继承ViewBaseServlet</p>
<p> 5） 根据逻辑视图名称 得到 物理视图名称<br> &#x2F;&#x2F;此处的视图名称是 index<br> &#x2F;&#x2F;那么thymeleaf会将这个 逻辑视图名称 对应到 物理视图 名称上去<br> &#x2F;&#x2F;逻辑视图名称 ：   index<br> &#x2F;&#x2F;物理视图名称 ：   view-prefix + 逻辑视图名称 + view-suffix<br> &#x2F;&#x2F;所以真实的视图名称是：      &#x2F;       index       .html<br> super.processTemplate(“index”,request,response);<br> 6） 使用thymeleaf的标签<br>   th:if   ,  th:unless   , th:each   ,   th:text</p>
</li>
</ol>
<p>&#x2F;&#x2F; 200 : 正常响应<br>&#x2F;&#x2F; 404 : 找不到资源<br>&#x2F;&#x2F; 405 : 请求方式不支持<br>&#x2F;&#x2F; 500 : 服务器内部错误</p>
<h2 id="IDEA断点调试"><a href="#IDEA断点调试" class="headerlink" title="IDEA断点调试"></a>IDEA断点调试</h2><h2 id="thyme-leaf"><a href="#thyme-leaf" class="headerlink" title="thyme leaf"></a>thyme leaf</h2><p><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419150228.png" alt="20220419150228"></p>
<ol start="7">
<li>Thymeleaf - 视图模板技术<br> 1） 添加thymeleaf的jar包(maven用pom)<br> 2） 新建一个Servlet类ViewBaseServlet（用了框架会被取代）<br> 3） 在web.xml文件中添加配置<br>- 配置前缀 view-prefix<br>- 配置后缀 view-suffix<br> 4） 使得我们的Servlet继承ViewBaseServlet<br> 5） 根据逻辑视图名称 得到 物理视图名称<br> &#x2F;&#x2F;此处的视图名称是 index<br> &#x2F;&#x2F;那么thymeleaf会将这个 逻辑视图名称 对应到 物理视图 名称上去<br> &#x2F;&#x2F;逻辑视图名称 ：   index<br> &#x2F;&#x2F;物理视图名称 ：   view-prefix + 逻辑视图名称 + view-suffix<br> &#x2F;&#x2F;所以真实的视图名称是：      &#x2F;       index       .html<br> super.processTemplate(“index”,request,response);<br> 6） 使用thymeleaf的标签<br>   th:if   ,  th:unless   , th:each   ,   th:text<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419161700.png" alt="20220419161700"></li>
</ol>
<h2 id="P32-pro10-fruit1-5-thymeleaf"><a href="#P32-pro10-fruit1-5-thymeleaf" class="headerlink" title="P32 pro10-fruit1.5-thymeleaf"></a>P32 pro10-fruit1.5-thymeleaf</h2><p>review:</p>
<ol>
<li><p>post提交方式下的设置编码，防止中文乱码<br>request.setCharacterEncoding(“utf-8”);<br>get提交方式，tomcat8开始，编码不需要设置<br>tomcat8之前，get方式设置比较麻烦：<br>String fname &#x3D; request.getParameter(“fname”);<br>byte[] bytes &#x3D; fname.getBytes(“iso-8859-1”);<br>fname &#x3D; new String(bytes,”UTF-8”);</p>
</li>
<li><p>Servlet继承关系以及生命周期<br>1） Servlet接口 ： init() , service() , destroy()<br>GenericServlet抽象子类： abstract service();<br>HttpServlet抽象子类：实现了service方法，在service方法内部通过request.getMethod()来判断请求的方式，<br>     然后根据请求的方式去调用内部的do方法。每一个do方法进行了简单实现，主要是如果请求方式不符合，则报405错误。<br>     目的是让我们的Servlet子类去重写对应的方法（如果重写的不对，则使用父类的405错误实现）<br>2） 生命周期：实例化、初始化、服务、销毁<br> - Tomcat负责维护Servlet实例的生命周期<br> - 每个Servlet在Tomcat容器中只有一个实例，它是线程不安全的<br> - Servlet的启动时机：<load-on-startup><br> - Servlet3.0开始支持注解: @WebServlet</p>
</li>
<li><p>HTTP协议：<br>1） 由 Request 和 Response 两部分组成<br>2） 请求包含了三部分：请求行、请求消息头、请求主体： 普通的get方式请求-query string；post方式- form data ； json格式 - request payload<br>3） 响应包含了三部分：响应行、响应消息头、响应主体</p>
</li>
<li><p>HttpSession<br>1） HttpSession ：表示 会话<br>2） 为什么需要HttpSession ， 原因是因为 Http协议是无状态的<br>3） Session保存作用域 ：一次会话范围都有效 ； void session.setAttribute(k,v) ,Object session.getAttribute(k)<br>4） 其他的API： session.getId() , session.isNew() , session.getCreationTime() , session.invalidate() 等等</p>
</li>
<li><p>服务器端转发和客户端重定向</p>
<ol>
<li>服务器端转发 ： request.getRequestDispatcher(“index.html”).forward(request,response);</li>
<li>客户端重定向： response.sendRedirect(“index.html”);</li>
</ol>
</li>
<li><p>thymeleaf的部分标签<br>1） 使用步骤： 添加jar ， 新建ViewBaseServlet(有两个方法） ， 配置两个<context-param> : view-prefix , view-suffix<br>2） 部分标签： <a href="th:if">th:if</a> , <a href="th:unless">th:unless</a> , <a href="th:each">th:each</a> , <a href="th:text">th:text</a></p>
</li>
</ol>
<p>今日内容：</p>
<ol>
<li><p>保存作用域<br>原始情况下，保存作用域我们可以认为有四个： page（页面级别，现在几乎不用） , request（一次请求响应范围） , session（一次会话范围） , application（整个应用程序范围）<br>1） request：一次请求响应范围<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419171758.png" alt="20220419171758"><br>2） session：一次会话范围有效<br>   <img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172739.png" alt="20220419172739"><br>3） application： 一次应用程序范围有效<br> <img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419172925.png" alt="20220419172925"></p>
</li>
<li><p>路径问题<br>1） 相对路径<br>2） 绝对路径<br><img src="https://yuki-picgo-img.oss-cn-beijing.aliyuncs.com/vscode-img/20220419173729.png" alt="20220419173729"></p>
</li>
<li><p>实现库存系统的功能</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/04/06/Javaweb/" data-id="cl7ete5b80004mkcq1748bzwn" data-title="Javaweb" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javawev/" rel="tag">javawev</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/07/BootStrap/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          BootStrap
        
      </div>
    </a>
  
  
    <a href="/2022/04/05/%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91OSS%E6%9B%BF%E6%8D%A2GitHub%E5%9B%BE%E5%BA%8A/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">使用阿里云OSS替换GitHub图床</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BootStrap/" rel="tag">BootStrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/" rel="tag">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javaweb/" rel="tag">Javaweb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/R2S/" rel="tag">R2S</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/" rel="tag">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/" rel="tag">javaweb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javawev/" rel="tag">javawev</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jsp/" rel="tag">jsp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mvc/" rel="tag">mvc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-boot/" rel="tag">spring boot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thyme-leaf/" rel="tag">thyme leaf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E8%B7%AF%E7%94%B1/" rel="tag">软路由</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" rel="tag">阿里云</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/BootStrap/" style="font-size: 10px;">BootStrap</a> <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Javaweb/" style="font-size: 17.5px;">Javaweb</a> <a href="/tags/R2S/" style="font-size: 10px;">R2S</a> <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/hexo/" style="font-size: 12.5px;">hexo</a> <a href="/tags/javaweb/" style="font-size: 10px;">javaweb</a> <a href="/tags/javawev/" style="font-size: 10px;">javawev</a> <a href="/tags/jsp/" style="font-size: 10px;">jsp</a> <a href="/tags/markdown/" style="font-size: 12.5px;">markdown</a> <a href="/tags/mvc/" style="font-size: 10px;">mvc</a> <a href="/tags/spring-boot/" style="font-size: 15px;">spring boot</a> <a href="/tags/thyme-leaf/" style="font-size: 17.5px;">thyme leaf</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">笔记</a> <a href="/tags/%E8%BD%AF%E8%B7%AF%E7%94%B1/" style="font-size: 10px;">软路由</a> <a href="/tags/%E9%98%BF%E9%87%8C%E4%BA%91/" style="font-size: 10px;">阿里云</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/08/29/%E5%95%8A%E5%AE%9E%E6%89%93%E5%AE%9E%E6%89%93%E7%AE%97/">啊实打实打算</a>
          </li>
        
          <li>
            <a href="/2022/08/29/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/05/02/%E6%90%AD%E5%BB%BA%E5%95%86%E5%9F%8E%E7%BD%91%E9%A1%B5/">搭建商城网站</a>
          </li>
        
          <li>
            <a href="/2022/05/02/%E6%90%AD%E5%BB%BA%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5/">搭建动态网站</a>
          </li>
        
          <li>
            <a href="/2022/04/19/IDEA%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%8C%85/">IDEA自动导包</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 Yuki<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>